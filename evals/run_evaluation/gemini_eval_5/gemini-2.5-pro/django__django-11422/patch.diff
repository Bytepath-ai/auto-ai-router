```diff
--- a/django/utils/autoreload.py
+++ b/django/utils/autoreload.py
@@ -200,17 +200,23 @@
         if module in seen_modules:
             continue
         seen_modules.add(module)
         spec = getattr(module, '__spec__', None)
-        if spec is None:
-            # Oy, modules that fail to be findable are a pain.
-            continue
-        if not getattr(spec, 'has_location', False):
-            # These are modules that are not file-based, like built-in
-            # modules.
-            continue
+        origin = None
+        if spec is None:
+            # This can happen for __main__ when running a script directly.
+            if module.__name__ == '__main__':
+                # The __file__ attribute is not guaranteed to be present.
+                # It may be missing, for example, in embedded environments.
+                if hasattr(module, '__file__'):
+                    origin = module.__file__
+        elif getattr(spec, 'has_location', False):
+            origin = spec.origin
+
+        if not origin:
+            continue
+
         # For .pyc files, watch the .py file.
-        origin = Path(spec.origin).resolve()
+        origin = Path(origin).resolve()
         if origin in seen_files:
             continue
         seen_files.add(origin)

```